# 方法一：梯度法

## 基本原理阐述

* 计算边界点坐标，存储在edge中；
* 根据原灰度图计算每一点梯度（只计算单边梯度即可）
* 从每一个梯度不为零的点出发，沿着法线方向延伸，找到对应的两个边界点坐标
* 搜索对应点的邻域，进一步优化
* 可视化

## 过程可视化

### 1、计算边界

![edge](计算软骨厚度.assets/edge.png)

### 2. 求梯度及其方向

**梯度方向**

![image-20220306174535698](计算软骨厚度.assets/image-20220306174535698.png)

**梯度值的灰度显示**

![image-20220306174659541](计算软骨厚度.assets/image-20220306174659541.png)

### 3. 延梯度计算对应点

![image-20220306174914556](计算软骨厚度.assets/image-20220306174914556.png)

### 4. 邻域内优化

![result](计算软骨厚度.assets/result.png)

### 5. 厚度的热力图显示

![heat_map](计算软骨厚度.assets/heat_map.png)

## 优点

* 只沿梯度方向进行延伸，时间复杂度不高，还可以接受
* 邻域搜索时利用广播机制进行了优化

## 缺点

* 由于离散点的梯度变化较大，所以个别点的梯度是不准确的
* 邻域搜索时阈值需要手动调
* 寻找梯度延长线与边界交点的时间复杂度较高，还可以优化

# 方法二：旋转法

## 基本原理阐述

* 计算边界点坐标，存储在edge中
* 从每一个边界点出发，按照指定角度旋转，指定长度延长。取延长线与边界交点距离的最小值，作为最终的结果
* 可视化

## 优点

* 由于360度都进行了寻找，所以精确度较高，但有时会找到同一边界的邻接点

## 缺点

* 时间复杂度高，效率低

# 进一步优化

## 离散点连续化

好像不太行！因为不能将不规则的线拟合

## 差分计算梯度

Scharr算子计算梯度时貌似已经用到了差分